---
layout: single
title: "[IT CookBook, 프로젝트로 배우는 데이터베이스 설계] 11. 물리적 설계"
categories:
  - book
sidebar:
  nav: "sidebar-category"
---

## 1. 물리적 설계 개요

**물리적 설계**는 논리적 설계 단계의 결과물을 기초로 하여 물리적 디비 구조를 생성하는 과정으로,<br />
데이터 중심의 물리적 스키마 모델링과 처리 중심의 트랜잭션 상세 설계를 포함함

### 물리적 스키마 모델링
- 데이터 중심 디비 설계 관점에서 논리적 데이터 구조를 DBMS가 지원하는 효율적이고 구현 가능한 물리적 데이터 구조로 변환하는 과정
- 주요 업무
  - 논리적 스키마를 기초로 하여 속성의 데이터 타입과 크기, 제약조건 등을 정의
  - DBMS의 특성과 구현 환경 등을 고려해서 내부 스키마를 테이블 형태로 표현
  - 시스템 성능을 고려해서 물리적 구조를 변경
  - 데이터 사용량 예측 등을 통해서 인덱스나 뷰 설계 작업을 수행
- 주요 특징
  - 하나의 릴레이션이 물리적으로 하나 이상의 테이블이 될 수 있음
  - 시스템 환경을 고려해서, 성능 최적화를 목표로 수행해야 함
  - 시스템 환경이 변경되면 물리적 스키마 모델링도 변경될 수 있음
  - 성능을 고려해서 통계 테이블이 추가되거나, 백업 또는 복제 용도의 테이블이 추가될 수 있음
- 주요 고려 사항
  - 응답시간 최소화
  - 저장 공간의 효율화
  - 트랜잭션 처리도 향상


## 2. 내부 스키마 작성 방법

**내부 스키마**는 릴레이션 스키마와 무결성 제약조건을 기초로 하여 정의한 물리적 데이터 구조, 즉 저장 레코드 양식을 의미함<br />
릴레이션은 테이블, 속성은 칼럼, 관련성은 외래키로 표현하고 데이터 타입/크기/제약조건 등을 포함해야 함


## 3. 물리적 구조 변경

### 테이블 추가
- 통계 테이블 추가 - 자주 사용되는 통계 데이터가 여러 테이블에 산재된 데이터를 기초로 하여 생성되는 경우, 별도의 통계 테이블을 생성해서 추가할 수 있음
- 이력 테이블 추가 - 하나의 업무 단위가 시간의 흐름에 따라 반복적으로 발생하거나 변경되는 이력 또는 진행 이력이 필요한 경우, 이력 테이블을 추가할 수 있음

### 테이블 분할
- 수직 분할 - 특정 칼럼을 분리해서 별도의 테이블로 관리하는 것으로, 물리적인 입출력 양을 감소시켜 검색 성능을 높일 수 있음
- 수평 분할 - 테이블의 행을 기준으로 분할해서 별도의 테이블로 관리하는 것으로, 물리적인 입출력 양을 감소시켜 검색 성능을 높일 수 있음

### 칼럼 중복
- 동일 칼럼 추가 - 검색 성능을 높이기 위해 자주 검색되는 칼럼을 중복시킬 수 있음. 하지만 갱신은 거의 일어나지 않아야 함
- 파생 칼럼 추가 - 다른 칼럼 값을 기초로 하여 계산된 합계, 평균, 개수 등의 파생된 값이 많이 활용되는 경우. 갱신될 때에는 파생된 값도 갱신되어야 함
- 기본키의 일부에 해당하는 칼럼 추가 - 기본키에 여러 가지 정보가 들어 있는데 그 일부가 자주 사용되는 경우, 해당 정보를 분리해서 별도의 칼럼으로 추가할 수 있음


## 4. 인덱스 설계

### 인덱스의 특징
- 포인터를 사용하여 행 검색을 촉진할 수 있는 디비 객체
- 테이블 행에 대한 직접적이고 빠른 접근 지원
- 인덱스는 행을 식별할 수 있도록 칼럼의 값과 행의 논리적인 주소로 구성되며, 별도의 저장 공간에 저장됨
- 인덱스는 DBMS에 의해 자동으로 생성되거나, 사용자에 의해 수동으로 생성될 수 있음
- 인덱스는 DBMS에 의해 자동으로 사용되고 유지됨
- 인덱스는 테이블과 논리적/물리적으로 독립되어 있음
- 기본 테이블에 영향을 주지 않고 생성하거나 제거할 수 있음
- 기본 테이블을 제거하면 인덱스도 자동으로 제거됨
- 인덱스를 생성하면 일반적으로 물리적인 디스크 I/O가 감소되지만, 인덱스를 너무 많이 생성하면 오히려 데이터 조작어의 처리 효율이 저하됨

### 인덱스 설계 절차
- 인덱스 대상 선정
- 인덱스 최적화
- 인덱스 정의서 작성


## 5. 뷰 설계

- 뷰는 하나 이상의 테이블에 포함된 데이터의 부분집합으로 구성되는 논리적인 테이블
- 논리적인 테이블이므로 실제적으로 물리적으로 생성되지 않으며, 뷰의 정의만 시스템에 저장됨
- 뷰를 사용하면 복잡한 테이블 구조를 단순화해서 검색 효율을 향상할 수 있음
- 하나 이상의 테이블을 기초로 뷰를 생성할 수 있음
- 테이블뿐만 아니라 다른 뷰를 기초로 하여 뷰를 생성할 수 있음
- 뷰 자체에는 데이터가 없음
- 뷰를 통한 검색은 테이블과 유사하지만, 뷰를 통한 삽입/삭제/갱신은 일부 제약을 받음
- 열 별칭을 사용해서 생성된 뷰는 열 별칭을 사용한 조작만 가능
- 외부 스키마는 기본 테이블과 뷰의 정의로 구성됨
- 뷰의 기초가 되는 기본 테이블이 삭제/갱신되면, 뷰도 자동으로 삭제/갱신됨
- 뷰는 `ALTER` 문을 사용해서 변경할 수 없으며, 변경이 필요한 경우 뷰를 삭제하고 다시 생성해야 함
- 뷰는 `DROP` 문을 사용해서 삭제할 수 있음
- 뷰는 기본 테이블의 인덱스를 사용하므로, 인덱스 칼럼을 함부로 가공하면 안됨

### 장단점
- 보안을 위해 디비에 대한 접근을 제한할 수 있음
- 복잡한 질의를 단순한 질의로 변환할 수 있음
- 데이터 독립성 제공
- 동일한 테이블에 대해 다른 뷰 생성 가능
- 뷰의 정의 갱신 불가
- 삽입/삭제/갱신 연산에 제한이 많음
