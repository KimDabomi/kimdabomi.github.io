---
layout: single
title: "[IT CookBook, 프로젝트로 배우는 데이터베이스 설계] 10. 정규화"
categories:
  - personal
sidebar:
  nav: "sidebar-category"
---

## 1. 이상 현상

**이상 현상**이란 관계 디비를 조작할 때 데이터의 중복으로 인해 발생하는 문제<br />
이상 현상은 데이터를 삽입/삭제/갱신할 때 발생하므로 릴레이션 스키마를 설계할 때는 발견하기 어려움

### 이상 현상의 종류
- 삽입 이상 - 불필요한 데이터를 함께 삽입하지 않으면 필요한 데이터를 삽입하는 것이 불가능한 현상
- 삭제 이상 - 어떤 데이터르 삭제하면 유용한 데이터도 함께 삭제되는 현상
- 갱신 이상 - 중복된 데이터 가운데 일부만 갱신되어 데이터의 불일치가 발생하는 현상

### 이상 현상의 원인과 해결 방법
- 근본 원인은 릴레이션 스키마를 생성할 때 속성 간의 종속성을 충분히 고려하지 않아 불필요한 데이터가 중복되었기 때문
- 속성 간에 존재하는 여러 개의 종속 관계를 하나의 릴레이션으로 표현했기 때문
- 릴레이션 스키마를 변환해서 속성 간의 여러 종속 관계를 분해해야 함
- 하나의 종속 관계가 하나의 릴레이션으로 표현되도록 릴레이션을 분해해야 하는데, 이 과정을 **정규화**라고 함


## 2. 함수적 종속과 함수적 종속 다이어그램

**함수적 종속**은 정규화의 핵심 개념으로, 릴레이션이 갖고 있는 이상 현상을 발견하기 위한 수단으로 사용됨


## 3. 완전 함수적 종속과 부분 함수적 종속

- 완전 함수적 종속 - 결정자인 복합키에 포함되는 속성 가운데 단독으로 결정자 역할을 하는 속성이 없으면, 종속자가 결정자에 완전 함수적 종속이 됨
- 부분 함수적 종속 - 결정자인 복합키에 포함되는 속성 가운데 단독으로 결정자 역할을 하는 속성이 있으면, 종속자가 결정자에 부분 함수적 종속이 됨


## 4. 이행적 함수적 종속

릴레이션 R에 함수적 종속 A -> C 가 존재 + 함수적 종속 A -> C AND B -> C 가 성립 = 속성 C는 속성 A에 이행적 함수적 종속이 됨

## 5. 정규화

### 개념
- 속성 간의 종속성을 분석하여 하나의 릴레이션에는 하나의 종속성만 갖도록 릴레이션을 분해하는 과정
- 이상 현상의 발생 요인인 데이터 중복을 최소화하기 위해서 일종의 제약조건을 기초로 하여 릴레이션을 분해하는 과정
- 스키마 변환을 통해서 일련의 제약조건을 만족하는 릴레이션을 만드는 과정
- 불필요한 데이터 중복을 제거해서 논리적 데이터 모델을 단순화하는 과정
- 중복된 데이터가 제거되어 이상 현상 감소
- 데이터의 일관성 유지
- 데이터 모델 단순화
- 데이터 무결성 유지 용이

### 원칙
- 데이터 중복 최소화
- 정보의 무손실 보장
- 분리 원칙 준수
  - 독립적인 관련성은 별도의 릴레이션으로 표현
  - 릴레이션 각각에 대해 독립적인 조작이 가능해야 함

### 정규화를 하지 않으면 발생할 수 있는 문제
- 데이터 중복으로 인해 이상 현상 발생
- 특정 정보를 표현하는 것이 불가능할 수 있음
- 널 값을 많이 포함하게 됨
- 저장된 정보가 부정확할 수 있음

### 정규형 개념
- 어떤 제약조건을 만족하는 릴레이션을 의미
- 정규형의 차수가 높아질수록 만족시켜야 하는 제약조건도 많아짐

### 정규화 과정
- 원자 값이 아닌 도메인 분해
- 부분 함수적 종속 제거
- 이행적 함수적 종속 제거
- 결정자가 후보키가 아닌 함수적 종속 제거
- 함수적 종속이 아닌 다치 종속 제거
- 후보키를 통하지 않은 조인 속성 제거


## 6. 제1, 제2, 제3 정규형

- 제1 정규형 - 어떤 릴레이션 R에 속한 모든 속성의 도메인이 원자 값을 가져야 함
- 제2 정규형 - 어떤 릴레이션 R이 1NF이면서 기본키가 아닌 모든 속성이 기본키에 완전 함수적 종속이어야 함
- 제3 정규형 - 어떤 릴레이션 R이 2NF이면서 기본키가 아닌 모든 속성이 기본키에 이행적 함수적 종속이 아니어야 함


## 7. 역정규화

- 성능 관점에서 보면 높은 정규형을 만족하는 릴레이션 스키마가 항상 최적의 상태라고 볼 수 없음
- 조인의 필요성이 증가 -> 성능 저하 초래 가능
- 역정규화 - 성능에 대한 요구를 만족시키기 위해 데이터 중복과 이상 현상을 대가로 치르면서 더 낮은 정규형으로 되돌아가는 것
