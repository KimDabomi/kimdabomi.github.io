---
layout: single
title: "[우테코] 프리코스 6기 1주차 - 숫자 야구 게임"
categories:
  - education
sidebar:
  nav: "sidebar-category"
---

> [1주차 숫자 야구 게임](https://github.com/woowacourse-precourse/java-baseball-6)

> [내 PR 주소](https://github.com/woowacourse-precourse/java-baseball-6/pull/576)

### ✅ 구현 기능 목록

- 수 받아오기 관련
  - 제시된 라이브러리 사용하여 컴퓨터가 랜덤수를 받아오게 설정
    - 1~9 범위의 수로 이루어진 세자리 정수
    - 하나씩 수를 가져와서 중복값이 아니면 리스트에 추가
  - 사용자가 입력한 값과 비교 검사
    - 1~9 범위의 수로 이루어진 세자리 정수
    - 각 자릿수를 리스트에 추가
    - 예외 - `IllegalArgumentException` 발생 + 프로그램 종료
      - 사용자가 0이 포함된 세자리 정수나, 세자리 정수가 아닌 값을 입력
      - 사용자가 중복된 수가 있는 세자리 정수를 입력
      - 사용자가 숫자가 아닌 문자를 입력
- 게임관련
  - 게임방법
    - 같은 숫자 && 같은 자릿수 -> 스트라이크++
    - 같은 숫자 && 다른 자릿수 -> 볼++
    - 같은 숫자가 없는 경우 -> 낫싱
  - 숫자 맞출 때까지 사용자 입력 받기
  - 숫자를 맞추면 게임 종료 묻기
    - 1은 새로 시작, 2는 종료
    - 프로그램 종료 시 `System.exit()` 사용 X

구현 기능 목록은 처음 작성해봐서 한참 생각했다. 맨날 낙서하듯 그림만 그려가지고..ㅎㅎ;;


### ✅ '수 받아오기 관련 + 게임관련' 으로 클래스 분할해서 진행

- 수 받아오기 관련 클래스 `GetNumbers`

``` java
package baseball;

import camp.nextstep.edu.missionutils.Console;
import camp.nextstep.edu.missionutils.Randoms;
import java.util.ArrayList;
import java.util.List;

public class GetNumbers {
    private static final int MAX_NUM_LENGTH = 3;

    // 컴퓨터가 받아오는 수
    public List<Integer> getRandomNumber() {
        List<Integer> computer = new ArrayList<>();

        while (computer.size() < 3) {
            int randomNumber = Randoms.pickNumberInRange(1, 9);
            if (!computer.contains(randomNumber)) {
                computer.add(randomNumber);
            }
        }
        return computer;
    }

    // 사용자가 입력하는 수
    public List<Integer> getUserInput() {
        System.out.print("숫자를 입력해주세요 : ");
        String input = Console.readLine();
        List<Integer> numbers = new ArrayList<>();

        for (char ch : input.toCharArray()) {
            int numberValue = Character.getNumericValue(ch);

            if (notContainNumber(numbers, numberValue)) {
                throw new IllegalArgumentException("중복된 값은 입력불가합니다.");
            }

            if (!notNumberRange(numberValue, 1, 9)) {
                throw new IllegalArgumentException("1~9 사이의 정수만 입력가능합니다.");
            }

            numbers.add(numberValue);
        }

        if (notListSize(numbers, MAX_NUM_LENGTH)) {
            throw new IllegalArgumentException("세자리 수만 입력가능합니다.");
        }

        return numbers;
    }

    // 중복된 숫자가 아닐 때
    public boolean notContainNumber(List<Integer> list, int value) {
        return list.contains(value);
    }

    // 1~9 사이의 숫자
    public boolean notNumberRange(int value, int min, int max) {
        return value >= min && value <= max;
    }

    // 세자리 수
    public boolean notListSize(List<Integer> list, int size) {
        return list.size() != size;
    }
}
```

- 게임관련 클래스 `BaseballGame`

``` java
package baseball;

import camp.nextstep.edu.missionutils.Console;
import java.util.List;

public class BaseballGame {
    private boolean runningGame = true;
    private static final int MAX_NUM_LENGTH = 3;

    public static void setRunningGame(boolean runningGame) {
        BaseballGame.runningGame = runningGame;
    }

    // 게임시작
    public void getGame() {
        GetNumbers gn = new GetNumbers();
        List<Integer> computerNum = gn.getRandomNumber();
        getGameProcess(computerNum);
    }

    // 게임진행
    public void getGameProcess(List<Integer> computer) {
        while (runningGame) {
            getGameResult(computer);
        }
    }

    // 게임결과
    public void getGameResult(List<Integer> computer) {
        GetNumbers gn = new GetNumbers();
        List<Integer> user = gn.getUserInput();
        int ballCount = 0;
        int strikeCount = 0;

        for (int i = 0; i < MAX_NUM_LENGTH; i++) {
            if (computer.contains(user.get(i)) && !computer.get(i).equals(user.get(i))) {
                ballCount++;
            }
            if (computer.get(i).equals(user.get(i))) {
                strikeCount++;
            }
        }

        checkCountResult(ballCount, strikeCount);
    }

    // 재시작 or 종료
    public int selectExit() {
        System.out.println("게임을 새로 시작하려면 1, 종료하려면 2를 입력하세요.");
        int choice = Integer.parseInt(Console.readLine());
        int selectNum = 1;
        if (choice != 1) {
            selectNum = -1;
        }
        return selectNum;
    }

    // 게임결과확인
    public void checkCountResult(int ballCount, int strikeCount) {
        StringBuilder result = new StringBuilder();

        if (strikeCount == MAX_NUM_LENGTH) {
            result.append("3스트라이크 3개의 숫자를 모두 맞히셨습니다! 게임 종료\n");
            System.out.println(result);
            int userSelectNum = selectExit();
            if (userSelectNum == 1) {
                getGame();
            }
            if (userSelectNum == -1) {
                runningGame = false;
            }
            return;
        }

        getCountMessage(result, ballCount, strikeCount);
        System.out.println(result.toString().trim());
    }

    // 게임결과메세지
    public void getCountMessage(StringBuilder result, int ballCount, int strikeCount) {
        if (ballCount > 0) {
            result.append(ballCount).append("볼 ");
        }

        if (strikeCount > 0) {
            result.append(strikeCount).append("스트라이크 ");
        }

        if (ballCount == 0 && strikeCount == 0) {
            result.append("낫싱");
        }
    }
}
```

이러고 클래스도 다 나누고 어플리케이션에는 메인 메서드만 남게 나눴는데, 이렇게 하니까 훨씬 깔끔하고 기능별로 보기 편한 것 같다. 클래스 기준으로 구현 기능 목록도 조금 수정했다.


### ✅ 제출하기

테스트 코드를 변경해도 된다 그랬는데, 그게 뭔가.... 채점 프로그램에 위배되는 사항을 추가했는지 안돼서 ㅠㅠ 세터함수가 문제인 것 같아서 게임진행 변수를 인스턴스 변수로 변경하고 세터함수를 지웠다! 오히려 이 과정을 수정하면서 세터를 안쓰고 구현하게 되었다...! 오히려 좋아~
하 그리고 깃헙 아이디가 KimDabomi인데 브랜치는 Kimdabomi로 되어있어서, 브랜치명을 한번 수정했는데!!! (깃헙은 대소문자 구분하지 않는다고 했지만 내심 보이는 게 다른 게 맘에 걸려서..) 근데 !!! 대소문자 구분하지 않는다며ㅠㅠ!! 나눠져서 커밋이 되버린겨...그래서...그거를 막 머지하고 체리픽하고 난리를 치다가.. 결국 커밋은 잘 합쳐쳤는데 코드가 잘못된 거 같아서 커뮤니티에 물어보니 테스트 코드가 문제인 거 같다고 하시길래...!!! 결국 세터랑 테스트케이스 추가했던거 삭제하니까 드디어... 됐다.....!!! ㅠㅠㅠ

![wooteco-6-1](/assets/images/wooteco-6-1.png)


### ✅ 소감

기능 구현이 생각보다 빠르게 끝나서 생각보다 쉬운가 싶었지만... 그저 기능 구현이 다가 아니구나했다.
리팩토링에 대해서 공부하고 리팩토링을 진행하면 할수록 보완할 부분이 계속 보여서 수정앤 수정 앤 수 정 앤~
예외에 대해서도 게임규칙이 어떻게 되나 생각해보면서 예외사항을 정리하는 것도 새로운 경험이었고,<br />

단순히 메서드랑 클래스만 나누면 된다 생각했는데, 변경사항이 있을 때마다 오류가 나서 다시 수정하는 과정에서 `while`문의 조건이나, 리턴하는 위치 등의 사소한 차이도 크게 작용한다는 것을 알게 됐다...!!!
진짜 많이 쫄았었는데 1주차 과제를 진행하면서 오히려 즐길 수 있을 거 같다는 느낌이 왔다..!!<br />

근데 처음에는 메서드를 완전 기능별로 나눠서, 볼도 따로 스트라이크도 따로 게임 종료도 따로 체크도 다 따로따로 했더니 테스트가 하나도 안맞아서 ㅋㅋ.ㅋ... 다시 다 합치고 게임시작하는 과정도 좀 더 우회했는데, 그러다보니 기능별 커밋도 꼬였다ㅠㅠ
1주차는 리팩토링 위주로만 시작해보자 했지만, 다른 분들 회고록들 보니까 놓친 부분이 많은 것 같다 흑흑<br />

다음부터는 설계를 더 해보고.. 검색도 더 많이 해보고 구현을 시작해야겠다. 기능별 커밋도 제대로 처음부터 해야지...!!!!<br />

(회고록도 좀...^^...자세하게 쓰자 느낌도 좋지만 한 것 위주로.. 녀석아...)
그래도 리스트를 많이 연습한 게 도움이 됐는지, 처음에 방법을 생각해볼 때 바로 리스트를 생각한 내 자신이 뿌듯했다..!
그래!!!! 이렇게 시작하는거야!!! 파잇힝!!!!!!!!!!!!!!<br />


> 보면서 리팩토링을 연습했지만 말씀하신대로 인스턴스 변수 줄이는 것과..
세터 없이 어떻게?! 라는 생각이 든다. 더 연습해야지!!!! [참고 영상](https://www.youtube.com/watch?v=bIeqAlmNRrA)
